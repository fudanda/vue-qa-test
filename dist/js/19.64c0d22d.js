(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[19],{"1Lbc":function(t,i,n){},"7l0S":function(t,i,n){"use strict";n.r(i);var e=function(){var t=this,i=t.$createElement,n=t._self._c||i;return n("div",{attrs:{id:"indexLizi"}})},o=[];e._withStripped=!0;n("r1bV"),n("Y9lz"),n("bHtr"),n("Vd3H"),n("a1Th"),n("Zz4T");var r=r||{};r.Color=function(t){this.autoUpdate=!0,this.setHex(t)},r.Color.prototype={setRGBA:function(t,i,n,e){this.r=t,this.g=i,this.b=n,this.a=e,this.autoUpdate&&(this.updateHex(),this.updateStyleString())},setHex:function(t){this.hex=t,this.autoUpdate&&(this.updateRGBA(),this.updateStyleString())},copyRGB:function(t){this.r=t.r,this.g=t.g,this.b=t.b},copyRGBA:function(t){this.r=t.r,this.g=t.g,this.b=t.b,this.a=t.a},multiplySelfRGB:function(t){this.r*=t.r,this.g*=t.g,this.b*=t.b},updateHex:function(){this.hex=Math.floor(255*this.a)<<24|Math.floor(255*this.r)<<16|Math.floor(255*this.g)<<8|Math.floor(255*this.b)},updateRGBA:function(){this.a=(this.hex>>24&255)/255,this.r=(this.hex>>16&255)/255,this.g=(this.hex>>8&255)/255,this.b=(255&this.hex)/255},updateStyleString:function(){this.__styleString="rgba("+Math.floor(255*this.r)+","+Math.floor(255*this.g)+","+Math.floor(255*this.b)+","+this.a+")"},toString:function(){return"THREE.Color ( r: "+this.r+", g: "+this.g+", b: "+this.b+", a: "+this.a+", hex: "+this.hex+" )"}},r.Vector2=function(t,i){this.x=t||0,this.y=i||0},r.Vector2.prototype={set:function(t,i){return this.x=t,this.y=i,this},copy:function(t){return this.x=t.x,this.y=t.y,this},addSelf:function(t){return this.x+=t.x,this.y+=t.y,this},add:function(t,i){return this.x=t.x+i.x,this.y=t.y+i.y,this},subSelf:function(t){return this.x-=t.x,this.y-=t.y,this},sub:function(t,i){return this.x=t.x-i.x,this.y=t.y-i.y,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this},unit:function(){return this.multiplyScalar(1/this.length()),this},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},lengthSq:function(){return this.x*this.x+this.y*this.y},negate:function(){return this.x=-this.x,this.y=-this.y,this},clone:function(){return new r.Vector2(this.x,this.y)},toString:function(){return"THREE.Vector2 ("+this.x+", "+this.y+")"}},r.Vector3=function(t,i,n){this.x=t||0,this.y=i||0,this.z=n||0},r.Vector3.prototype={set:function(t,i,n){return this.x=t,this.y=i,this.z=n,this},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},add:function(t,i){return this.x=t.x+i.x,this.y=t.y+i.y,this.z=t.z+i.z,this},addSelf:function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this},sub:function(t,i){return this.x=t.x-i.x,this.y=t.y-i.y,this.z=t.z-i.z,this},subSelf:function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this},cross:function(t,i){return this.x=t.y*i.z-t.z*i.y,this.y=t.z*i.x-t.x*i.z,this.z=t.x*i.y-t.y*i.x,this},crossSelf:function(t){var i=this.x,n=this.y,e=this.z;return this.x=n*t.z-e*t.y,this.y=e*t.x-i*t.z,this.z=i*t.y-n*t.x,this},multiplySelf:function(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this},divideScalar:function(t){return this.x/=t,this.y/=t,this.z/=t,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var i=this.x-t.x,n=this.y-t.y,e=this.z-t.z;return i*i+n*n+e*e},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},normalize:function(){return this.length()>0?this.multiplyScalar(1/this.length()):this.multiplyScalar(0),this},setLength:function(t){return this.normalize().multiplyScalar(t)},isZero:function(){var t=1e-4;return Math.abs(this.x)<t&&Math.abs(this.y)<t&&Math.abs(this.z)<t},clone:function(){return new r.Vector3(this.x,this.y,this.z)},toString:function(){return"THREE.Vector3 ( "+this.x+", "+this.y+", "+this.z+" )"}},r.Vector4=function(t,i,n,e){this.x=t||0,this.y=i||0,this.z=n||0,this.w=e||1},r.Vector4.prototype={set:function(t,i,n,e){return this.x=t,this.y=i,this.z=n,this.w=e,this},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w,this},add:function(t,i){return this.x=t.x+i.x,this.y=t.y+i.y,this.z=t.z+i.z,this.w=t.w+i.w,this},addSelf:function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this},sub:function(t,i){return this.x=t.x-i.x,this.y=t.y-i.y,this.z=t.z-i.z,this.w=t.w-i.w,this},subSelf:function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this},clone:function(){return new r.Vector4(this.x,this.y,this.z,this.w)},toString:function(){return"THREE.Vector4 ("+this.x+", "+this.y+", "+this.z+", "+this.w+")"}},r.Rectangle=function(){var t,i,n,e,o,r,s=!0;function a(){o=n-t,r=e-i}this.getX=function(){return t},this.getY=function(){return i},this.getWidth=function(){return o},this.getHeight=function(){return r},this.getX1=function(){return t},this.getY1=function(){return i},this.getX2=function(){return n},this.getY2=function(){return e},this.set=function(o,r,h,l){s=!1,t=o,i=r,n=h,e=l,a()},this.addPoint=function(o,r){s?(s=!1,t=o,i=r,n=o,e=r):(t=Math.min(t,o),i=Math.min(i,r),n=Math.max(n,o),e=Math.max(e,r)),a()},this.addRectangle=function(o){s?(s=!1,t=o.getX1(),i=o.getY1(),n=o.getX2(),e=o.getY2()):(t=Math.min(t,o.getX1()),i=Math.min(i,o.getY1()),n=Math.max(n,o.getX2()),e=Math.max(e,o.getY2())),a()},this.inflate=function(o){t-=o,i-=o,n+=o,e+=o,a()},this.minSelf=function(o){t=Math.max(t,o.getX1()),i=Math.max(i,o.getY1()),n=Math.min(n,o.getX2()),e=Math.min(e,o.getY2()),a()},this.instersects=function(o){return Math.min(n,o.getX2())-Math.max(t,o.getX1())>=0&&Math.min(e,o.getY2())-Math.max(i,o.getY1())>=0},this.empty=function(){s=!0,t=0,i=0,n=0,e=0,a()},this.isEmpty=function(){return s},this.toString=function(){return"THREE.Rectangle (x1: "+t+", y1: "+e+", x2: "+n+", y1: "+i+", width: "+o+", height: "+r+")"}},r.Matrix3=function(){this.m=[]},r.Matrix3.prototype={transpose:function(){var t;return t=this.m[1],this.m[1]=this.m[3],this.m[3]=t,t=this.m[2],this.m[2]=this.m[6],this.m[6]=t,t=this.m[5],this.m[5]=this.m[7],this.m[7]=t,this}},r.Matrix4=function(){this._x=new r.Vector3,this._y=new r.Vector3,this._z=new r.Vector3},r.Matrix4.prototype={n11:1,n12:0,n13:0,n14:0,n21:0,n22:1,n23:0,n24:0,n31:0,n32:0,n33:1,n34:0,n41:0,n42:0,n43:0,n44:1,identity:function(){this.n11=1,this.n12=0,this.n13=0,this.n14=0,this.n21=0,this.n22=1,this.n23=0,this.n24=0,this.n31=0,this.n32=0,this.n33=1,this.n34=0,this.n41=0,this.n42=0,this.n43=0,this.n44=1},copy:function(t){this.n11=t.n11,this.n12=t.n12,this.n13=t.n13,this.n14=t.n14,this.n21=t.n21,this.n22=t.n22,this.n23=t.n23,this.n24=t.n24,this.n31=t.n31,this.n32=t.n32,this.n33=t.n33,this.n34=t.n34,this.n41=t.n41,this.n42=t.n42,this.n43=t.n43,this.n44=t.n44},lookAt:function(t,i,n){var e=this._x,o=this._y,r=this._z;r.sub(t,i),r.normalize(),e.cross(n,r),e.normalize(),o.cross(r,e),o.normalize(),this.n11=e.x,this.n12=e.y,this.n13=e.z,this.n14=-e.dot(t),this.n21=o.x,this.n22=o.y,this.n23=o.z,this.n24=-o.dot(t),this.n31=r.x,this.n32=r.y,this.n33=r.z,this.n34=-r.dot(t),this.n41=0,this.n42=0,this.n43=0,this.n44=1},transform:function(t){var i=t.x,n=t.y,e=t.z,o=t.w?t.w:1;return t.x=this.n11*i+this.n12*n+this.n13*e+this.n14*o,t.y=this.n21*i+this.n22*n+this.n23*e+this.n24*o,t.z=this.n31*i+this.n32*n+this.n33*e+this.n34*o,o=this.n41*i+this.n42*n+this.n43*e+this.n44*o,t.w?t.w=o:(t.x=t.x/o,t.y=t.y/o,t.z=t.z/o),t},crossVector:function(t){var i=new r.Vector4;return i.x=this.n11*t.x+this.n12*t.y+this.n13*t.z+this.n14*t.w,i.y=this.n21*t.x+this.n22*t.y+this.n23*t.z+this.n24*t.w,i.z=this.n31*t.x+this.n32*t.y+this.n33*t.z+this.n34*t.w,i.w=t.w?this.n41*t.x+this.n42*t.y+this.n43*t.z+this.n44*t.w:1,i},multiply:function(t,i){this.n11=t.n11*i.n11+t.n12*i.n21+t.n13*i.n31+t.n14*i.n41,this.n12=t.n11*i.n12+t.n12*i.n22+t.n13*i.n32+t.n14*i.n42,this.n13=t.n11*i.n13+t.n12*i.n23+t.n13*i.n33+t.n14*i.n43,this.n14=t.n11*i.n14+t.n12*i.n24+t.n13*i.n34+t.n14*i.n44,this.n21=t.n21*i.n11+t.n22*i.n21+t.n23*i.n31+t.n24*i.n41,this.n22=t.n21*i.n12+t.n22*i.n22+t.n23*i.n32+t.n24*i.n42,this.n23=t.n21*i.n13+t.n22*i.n23+t.n23*i.n33+t.n24*i.n43,this.n24=t.n21*i.n14+t.n22*i.n24+t.n23*i.n34+t.n24*i.n44,this.n31=t.n31*i.n11+t.n32*i.n21+t.n33*i.n31+t.n34*i.n41,this.n32=t.n31*i.n12+t.n32*i.n22+t.n33*i.n32+t.n34*i.n42,this.n33=t.n31*i.n13+t.n32*i.n23+t.n33*i.n33+t.n34*i.n43,this.n34=t.n31*i.n14+t.n32*i.n24+t.n33*i.n34+t.n34*i.n44,this.n41=t.n41*i.n11+t.n42*i.n21+t.n43*i.n31+t.n44*i.n41,this.n42=t.n41*i.n12+t.n42*i.n22+t.n43*i.n32+t.n44*i.n42,this.n43=t.n41*i.n13+t.n42*i.n23+t.n43*i.n33+t.n44*i.n43,this.n44=t.n41*i.n14+t.n42*i.n24+t.n43*i.n34+t.n44*i.n44},multiplySelf:function(t){var i=this.n11,n=this.n12,e=this.n13,o=this.n14,r=this.n21,s=this.n22,a=this.n23,h=this.n24,l=this.n31,c=this.n32,u=this.n33,f=this.n34,m=this.n41,p=this.n42,x=this.n43,d=this.n44;this.n11=i*t.n11+n*t.n21+e*t.n31+o*t.n41,this.n12=i*t.n12+n*t.n22+e*t.n32+o*t.n42,this.n13=i*t.n13+n*t.n23+e*t.n33+o*t.n43,this.n14=i*t.n14+n*t.n24+e*t.n34+o*t.n44,this.n21=r*t.n11+s*t.n21+a*t.n31+h*t.n41,this.n22=r*t.n12+s*t.n22+a*t.n32+h*t.n42,this.n23=r*t.n13+s*t.n23+a*t.n33+h*t.n43,this.n24=r*t.n14+s*t.n24+a*t.n34+h*t.n44,this.n31=l*t.n11+c*t.n21+u*t.n31+f*t.n41,this.n32=l*t.n12+c*t.n22+u*t.n32+f*t.n42,this.n33=l*t.n13+c*t.n23+u*t.n33+f*t.n43,this.n34=l*t.n14+c*t.n24+u*t.n34+f*t.n44,this.n41=m*t.n11+p*t.n21+x*t.n31+d*t.n41,this.n42=m*t.n12+p*t.n22+x*t.n32+d*t.n42,this.n43=m*t.n13+p*t.n23+x*t.n33+d*t.n43,this.n44=m*t.n14+p*t.n24+x*t.n34+d*t.n44},multiplyScalar:function(t){this.n11*=t,this.n12*=t,this.n13*=t,this.n14*=t,this.n21*=t,this.n22*=t,this.n23*=t,this.n24*=t,this.n31*=t,this.n32*=t,this.n33*=t,this.n34*=t,this.n41*=t,this.n42*=t,this.n43*=t,this.n44*=t},determinant:function(){return this.n14*this.n23*this.n32*this.n41-this.n13*this.n24*this.n32*this.n41-this.n14*this.n22*this.n33*this.n41+this.n12*this.n24*this.n33*this.n41+this.n13*this.n22*this.n34*this.n41-this.n12*this.n23*this.n34*this.n41-this.n14*this.n23*this.n31*this.n42+this.n13*this.n24*this.n31*this.n42+this.n14*this.n21*this.n33*this.n42-this.n11*this.n24*this.n33*this.n42-this.n13*this.n21*this.n34*this.n42+this.n11*this.n23*this.n34*this.n42+this.n14*this.n22*this.n31*this.n43-this.n12*this.n24*this.n31*this.n43-this.n14*this.n21*this.n32*this.n43+this.n11*this.n24*this.n32*this.n43+this.n12*this.n21*this.n34*this.n43-this.n11*this.n22*this.n34*this.n43-this.n13*this.n22*this.n31*this.n44+this.n12*this.n23*this.n31*this.n44+this.n13*this.n21*this.n32*this.n44-this.n11*this.n23*this.n32*this.n44-this.n12*this.n21*this.n33*this.n44+this.n11*this.n22*this.n33*this.n44},transpose:function(){function t(t,i,n){var e=t[i];t[i]=t[n],t[n]=e}return t(this,"n21","n12"),t(this,"n31","n13"),t(this,"n32","n23"),t(this,"n41","n14"),t(this,"n42","n24"),t(this,"n43","n34"),this},clone:function(){var t=new r.Matrix4;return t.n11=this.n11,t.n12=this.n12,t.n13=this.n13,t.n14=this.n14,t.n21=this.n21,t.n22=this.n22,t.n23=this.n23,t.n24=this.n24,t.n31=this.n31,t.n32=this.n32,t.n33=this.n33,t.n34=this.n34,t.n41=this.n41,t.n42=this.n42,t.n43=this.n43,t.n44=this.n44,t},flatten:function(){return[this.n11,this.n21,this.n31,this.n41,this.n12,this.n22,this.n32,this.n42,this.n13,this.n23,this.n33,this.n43,this.n14,this.n24,this.n34,this.n44]},toString:function(){return"| "+this.n11+" "+this.n12+" "+this.n13+" "+this.n14+" |\n| "+this.n21+" "+this.n22+" "+this.n23+" "+this.n24+" |\n| "+this.n31+" "+this.n32+" "+this.n33+" "+this.n34+" |\n| "+this.n41+" "+this.n42+" "+this.n43+" "+this.n44+" |"}},r.Matrix4.translationMatrix=function(t,i,n){var e=new r.Matrix4;return e.n14=t,e.n24=i,e.n34=n,e},r.Matrix4.scaleMatrix=function(t,i,n){var e=new r.Matrix4;return e.n11=t,e.n22=i,e.n33=n,e},r.Matrix4.rotationXMatrix=function(t){var i=new r.Matrix4;return i.n22=i.n33=Math.cos(t),i.n32=Math.sin(t),i.n23=-i.n32,i},r.Matrix4.rotationYMatrix=function(t){var i=new r.Matrix4;return i.n11=i.n33=Math.cos(t),i.n13=Math.sin(t),i.n31=-i.n13,i},r.Matrix4.rotationZMatrix=function(t){var i=new r.Matrix4;return i.n11=i.n22=Math.cos(t),i.n21=Math.sin(t),i.n12=-i.n21,i},r.Matrix4.rotationAxisAngleMatrix=function(t,i){var n=new r.Matrix4,e=Math.cos(i),o=Math.sin(i),s=1-e,a=t.x,h=t.y,l=t.z;return n.n11=s*a*a+e,n.n12=s*a*h-o*l,n.n13=s*a*l+o*h,n.n21=s*a*h+o*l,n.n22=s*h*h+e,n.n23=s*h*l-o*a,n.n31=s*a*l-o*h,n.n32=s*h*l+o*a,n.n33=s*l*l+e,n},r.Matrix4.makeInvert=function(t){var i=new r.Matrix4;return i.n11=t.n23*t.n34*t.n42-t.n24*t.n33*t.n42+t.n24*t.n32*t.n43-t.n22*t.n34*t.n43-t.n23*t.n32*t.n44+t.n22*t.n33*t.n44,i.n12=t.n14*t.n33*t.n42-t.n13*t.n34*t.n42-t.n14*t.n32*t.n43+t.n12*t.n34*t.n43+t.n13*t.n32*t.n44-t.n12*t.n33*t.n44,i.n13=t.n13*t.n24*t.n42-t.n14*t.n23*t.n42+t.n14*t.n22*t.n43-t.n12*t.n24*t.n43-t.n13*t.n22*t.n44+t.n12*t.n23*t.n44,i.n14=t.n14*t.n23*t.n32-t.n13*t.n24*t.n32-t.n14*t.n22*t.n33+t.n12*t.n24*t.n33+t.n13*t.n22*t.n34-t.n12*t.n23*t.n34,i.n21=t.n24*t.n33*t.n41-t.n23*t.n34*t.n41-t.n24*t.n31*t.n43+t.n21*t.n34*t.n43+t.n23*t.n31*t.n44-t.n21*t.n33*t.n44,i.n22=t.n13*t.n34*t.n41-t.n14*t.n33*t.n41+t.n14*t.n31*t.n43-t.n11*t.n34*t.n43-t.n13*t.n31*t.n44+t.n11*t.n33*t.n44,i.n23=t.n14*t.n23*t.n41-t.n13*t.n24*t.n41-t.n14*t.n21*t.n43+t.n11*t.n24*t.n43+t.n13*t.n21*t.n44-t.n11*t.n23*t.n44,i.n24=t.n13*t.n24*t.n31-t.n14*t.n23*t.n31+t.n14*t.n21*t.n33-t.n11*t.n24*t.n33-t.n13*t.n21*t.n34+t.n11*t.n23*t.n34,i.n31=t.n22*t.n34*t.n41-t.n24*t.n32*t.n41+t.n24*t.n31*t.n42-t.n21*t.n34*t.n42-t.n22*t.n31*t.n44+t.n21*t.n32*t.n44,i.n32=t.n14*t.n32*t.n41-t.n12*t.n34*t.n41-t.n14*t.n31*t.n42+t.n11*t.n34*t.n42+t.n12*t.n31*t.n44-t.n11*t.n32*t.n44,i.n33=t.n13*t.n24*t.n41-t.n14*t.n22*t.n41+t.n14*t.n21*t.n42-t.n11*t.n24*t.n42-t.n12*t.n21*t.n44+t.n11*t.n22*t.n44,i.n34=t.n14*t.n22*t.n31-t.n12*t.n24*t.n31-t.n14*t.n21*t.n32+t.n11*t.n24*t.n32+t.n12*t.n21*t.n34-t.n11*t.n22*t.n34,i.n41=t.n23*t.n32*t.n41-t.n22*t.n33*t.n41-t.n23*t.n31*t.n42+t.n21*t.n33*t.n42+t.n22*t.n31*t.n43-t.n21*t.n32*t.n43,i.n42=t.n12*t.n33*t.n41-t.n13*t.n32*t.n41+t.n13*t.n31*t.n42-t.n11*t.n33*t.n42-t.n12*t.n31*t.n43+t.n11*t.n32*t.n43,i.n43=t.n13*t.n22*t.n41-t.n12*t.n23*t.n41-t.n13*t.n21*t.n42+t.n11*t.n23*t.n42+t.n12*t.n21*t.n43-t.n11*t.n22*t.n43,i.n44=t.n12*t.n23*t.n31-t.n13*t.n22*t.n31+t.n13*t.n21*t.n32-t.n11*t.n23*t.n32-t.n12*t.n21*t.n33+t.n11*t.n22*t.n33,i.multiplyScalar(1/t.determinant()),i},r.Matrix4.makeInvert3x3=function(t){var i,n=t.flatten(),e=new r.Matrix3,o=n[10]*n[5]-n[6]*n[9],s=-n[10]*n[1]+n[2]*n[9],a=n[6]*n[1]-n[2]*n[5],h=-n[10]*n[4]+n[6]*n[8],l=n[10]*n[0]-n[2]*n[8],c=-n[6]*n[0]+n[2]*n[4],u=n[9]*n[4]-n[5]*n[8],f=-n[9]*n[0]+n[1]*n[8],m=n[5]*n[0]-n[1]*n[4],p=n[0]*o+n[1]*h+n[2]*u;if(0==p)throw"matrix not invertible";return i=1/p,e.m[0]=i*o,e.m[1]=i*s,e.m[2]=i*a,e.m[3]=i*h,e.m[4]=i*l,e.m[5]=i*c,e.m[6]=i*u,e.m[7]=i*f,e.m[8]=i*m,e},r.Matrix4.makeFrustum=function(t,i,n,e,o,s){var a,h,l,c,u,f,m;return a=new r.Matrix4,h=2*o/(i-t),l=2*o/(e-n),c=(i+t)/(i-t),u=(e+n)/(e-n),f=-(s+o)/(s-o),m=-2*s*o/(s-o),a.n11=h,a.n12=0,a.n13=c,a.n14=0,a.n21=0,a.n22=l,a.n23=u,a.n24=0,a.n31=0,a.n32=0,a.n33=f,a.n34=m,a.n41=0,a.n42=0,a.n43=-1,a.n44=0,a},r.Matrix4.makePerspective=function(t,i,n,e){var o,s,a,h;return o=n*Math.tan(t*Math.PI/360),s=-o,a=s*i,h=o*i,r.Matrix4.makeFrustum(a,h,s,o,n,e)},r.Matrix4.makeOrtho=function(t,i,n,e,o,s){var a,h,l,c,u,f,m;return a=new r.Matrix4,u=i-t,f=e-n,m=s-o,h=(i+t)/u,l=(e+n)/f,c=(s+o)/m,a.n11=2/u,a.n12=0,a.n13=0,a.n14=-h,a.n21=0,a.n22=2/f,a.n23=0,a.n24=-l,a.n31=0,a.n32=0,a.n33=-2/m,a.n34=-c,a.n41=0,a.n42=0,a.n43=0,a.n44=1,a},r.Vertex=function(t,i){this.position=t||new r.Vector3,this.positionWorld=new r.Vector3,this.positionScreen=new r.Vector3,this.normal=i||new r.Vector3,this.normalWorld=new r.Vector3,this.normalScreen=new r.Vector3,this.__visible=!0},r.Vertex.prototype={toString:function(){return"THREE.Vertex ( position: "+this.position+", normal: "+this.normal+" )"}},r.Face3=function(t,i,n,e,o){this.a=t,this.b=i,this.c=n,this.centroid=new r.Vector3,this.normal=e instanceof r.Vector3?e:new r.Vector3,this.vertexNormals=e instanceof Array?e:[],this.material=o instanceof Array?o:[o]},r.Face3.prototype={toString:function(){return"THREE.Face3 ( "+this.a+", "+this.b+", "+this.c+" )"}},r.Face4=function(t,i,n,e,o,s){this.a=t,this.b=i,this.c=n,this.d=e,this.centroid=new r.Vector3,this.normal=o instanceof r.Vector3?o:new r.Vector3,this.vertexNormals=o instanceof Array?o:[],this.material=s instanceof Array?s:[s]},r.Face4.prototype={toString:function(){return"THREE.Face4 ( "+this.a+", "+this.b+", "+this.c+" "+this.d+" )"}},r.UV=function(t,i){this.u=t||0,this.v=i||0},r.UV.prototype={copy:function(t){this.u=t.u,this.v=t.v},toString:function(){return"THREE.UV ("+this.u+", "+this.v+")"}},r.Geometry=function(){this.vertices=[],this.faces=[],this.uvs=[]},r.Geometry.prototype={computeCentroids:function(){var t,i,n;for(t=0,i=this.faces.length;t<i;t++)n=this.faces[t],n.centroid.set(0,0,0),n instanceof r.Face3?(n.centroid.addSelf(this.vertices[n.a].position),n.centroid.addSelf(this.vertices[n.b].position),n.centroid.addSelf(this.vertices[n.c].position),n.centroid.divideScalar(3)):n instanceof r.Face4&&(n.centroid.addSelf(this.vertices[n.a].position),n.centroid.addSelf(this.vertices[n.b].position),n.centroid.addSelf(this.vertices[n.c].position),n.centroid.addSelf(this.vertices[n.d].position),n.centroid.divideScalar(4))},computeNormals:function(t){var i,n,e,o,s,a,h,l,c,u,f,m=new r.Vector3,p=new r.Vector3;for(e=0,o=this.vertices.length;e<o;e++)s=this.vertices[e],s.normal.set(0,0,0);for(a=0,h=this.faces.length;a<h;a++)if(l=this.faces[a],t&&l.vertexNormals.length){for(m.set(0,0,0),i=0,n=l.normal.length;i<n;i++)m.addSelf(l.vertexNormals[i]);m.divideScalar(3),m.isZero()||m.normalize(),l.normal.copy(m)}else c=this.vertices[l.a],u=this.vertices[l.b],f=this.vertices[l.c],m.sub(f.position,u.position),p.sub(c.position,u.position),m.crossSelf(p),m.isZero()||m.normalize(),l.normal.copy(m)},computeBoundingBox:function(){if(this.vertices.length>0){this.bbox={x:[this.vertices[0].position.x,this.vertices[0].position.x],y:[this.vertices[0].position.y,this.vertices[0].position.y],z:[this.vertices[0].position.z,this.vertices[0].position.z]};for(var t=1,i=this.vertices.length;t<i;t++)vertex=this.vertices[t],vertex.position.x<this.bbox.x[0]?this.bbox.x[0]=vertex.position.x:vertex.position.x>this.bbox.x[1]&&(this.bbox.x[1]=vertex.position.x),vertex.position.y<this.bbox.y[0]?this.bbox.y[0]=vertex.position.y:vertex.position.y>this.bbox.y[1]&&(this.bbox.y[1]=vertex.position.y),vertex.position.z<this.bbox.z[0]?this.bbox.z[0]=vertex.position.z:vertex.position.z>this.bbox.z[1]&&(this.bbox.z[1]=vertex.position.z)}},toString:function(){return"THREE.Geometry ( vertices: "+this.vertices+", faces: "+this.faces+" )"}},r.Camera=function(t,i,n,e){this.fov=t,this.aspect=i,this.position=new r.Vector3(0,0,0),this.target={position:new r.Vector3(0,0,0)},this.projectionMatrix=r.Matrix4.makePerspective(t,i,n,e),this.up=new r.Vector3(0,1,0),this.matrix=new r.Matrix4,this.autoUpdateMatrix=!0,this.updateMatrix=function(){this.matrix.lookAt(this.position,this.target.position,this.up)},this.toString=function(){return"THREE.Camera ( "+this.position+", "+this.target.position+" )"}},r.Light=function(t){this.color=new r.Color(255<<24|t)},r.AmbientLight=function(t){r.Light.call(this,t)},r.AmbientLight.prototype=new r.Light,r.AmbientLight.prototype.constructor=r.AmbientLight,r.DirectionalLight=function(t,i){r.Light.call(this,t),this.position=new r.Vector3(0,1,0),this.intensity=i||1},r.DirectionalLight.prototype=new r.Light,r.DirectionalLight.prototype.constructor=r.DirectionalLight,r.PointLight=function(t,i){r.Light.call(this,t),this.position=new r.Vector3(0,0,0),this.intensity=i||1},r.DirectionalLight.prototype=new r.Light,r.DirectionalLight.prototype.constructor=r.PointLight,r.Object3D=function(t){this.position=new r.Vector3,this.rotation=new r.Vector3,this.scale=new r.Vector3(1,1,1),this.matrix=new r.Matrix4,this.matrixTranslation=new r.Matrix4,this.matrixRotation=new r.Matrix4,this.matrixScale=new r.Matrix4,this.screen=new r.Vector3,this.autoUpdateMatrix=!0,this.updateMatrix=function(){this.matrixPosition=r.Matrix4.translationMatrix(this.position.x,this.position.y,this.position.z),this.matrixRotation=r.Matrix4.rotationXMatrix(this.rotation.x),this.matrixRotation.multiplySelf(r.Matrix4.rotationYMatrix(this.rotation.y)),this.matrixRotation.multiplySelf(r.Matrix4.rotationZMatrix(this.rotation.z)),this.matrixScale=r.Matrix4.scaleMatrix(this.scale.x,this.scale.y,this.scale.z),this.matrix.copy(this.matrixPosition),this.matrix.multiplySelf(this.matrixRotation),this.matrix.multiplySelf(this.matrixScale)}},r.Particle=function(t){r.Object3D.call(this),this.material=t instanceof Array?t:[t],this.autoUpdateMatrix=!1},r.Particle.prototype=new r.Object3D,r.Particle.prototype.constructor=r.Particle,r.Line=function(t,i){r.Object3D.call(this),this.geometry=t,this.material=i instanceof Array?i:[i]},r.Line.prototype=new r.Object3D,r.Line.prototype.constructor=r.Line,r.Mesh=function(t,i,n){r.Object3D.call(this),this.geometry=t,this.material=i instanceof Array?i:[i],this.flipSided=!1,this.doubleSided=!1,this.overdraw=!1,this.materialFaceGroup={},this.sortFacesByMaterial(),n&&this.normalizeUVs(),this.geometry.computeBoundingBox()},r.Mesh.prototype=new r.Object3D,r.Mesh.prototype.constructor=r.Mesh,r.Mesh.prototype.sortFacesByMaterial=function(){var t,i,n,e,o,r,s;function a(n){for(s=[],t=0,i=n.length;t<i;t++)void 0==n[t]?s.push("undefined"):s.push(n[t].toString());return s.join("_")}for(n=0,e=this.geometry.faces.length;n<e;n++)o=this.geometry.faces[n],r=o.material,hash=a(r),void 0==this.materialFaceGroup[hash]&&(this.materialFaceGroup[hash]={faces:[],material:r}),this.materialFaceGroup[hash].faces.push(n)},r.Mesh.prototype.normalizeUVs=function(){var t,i,n,e,o;for(t=0,i=this.geometry.uvs.length;t<i;t++)for(o=this.geometry.uvs[t],n=0,e=o.length;n<e;n++)1!=o[n].u&&(o[n].u=o[n].u-Math.floor(o[n].u)),1!=o[n].v&&(o[n].v=o[n].v-Math.floor(o[n].v))},r.LineColorMaterial=function(t,i,n){this.lineWidth=n||1,this.color=new r.Color((i>=0?255*i<<24:4278190080)|t)},r.LineColorMaterial.prototype={toString:function(){return"THREE.LineColorMaterial ( color: "+this.color+", lineWidth: "+this.lineWidth+" )"}},r.MeshPhongMaterial=function(t,i,n,e,o){this.ambient=new r.Color((o>=0?255*o<<24:4278190080)|t),this.diffuse=new r.Color((o>=0?255*o<<24:4278190080)|i),this.specular=new r.Color((o>=0?255*o<<24:4278190080)|n),this.shininess=e,this.opacity=o,this.toString=function(){return"THREE.MeshPhongMaterial ( <br/>ambient: "+this.ambient+", <br/>diffuse: "+this.diffuse+", <br/>specular: "+this.specular+", <br/>shininess: "+this.shininess+", <br/>opacity: "+this.opacity+")"}},r.MeshBitmapMaterial=function(t,i){this.bitmap=t,this.mode=i||r.MeshBitmapMaterialMode.UVMAPPING,this.id=r.MeshBitmapMaterialCounter.value++,this.toString=function(){return"THREE.MeshBitmapMaterial ( bitmap: "+this.bitmap+", mode: "+this.mode+", id: "+this.id+" )"}},r.MeshBitmapMaterialCounter={value:0},r.MeshBitmapMaterialMode={UVMAPPING:0},r.MeshColorFillMaterial=function(t,i){this.color=new r.Color((i>=0?255*i<<24:4278190080)|t),this.toString=function(){return"THREE.MeshColorFillMaterial ( color: "+this.color+" )"}},r.MeshColorStrokeMaterial=function(t,i,n){this.lineWidth=n||1,this.color=new r.Color((i>=0?255*i<<24:4278190080)|t),this.toString=function(){return"THREE.MeshColorStrokeMaterial ( lineWidth: "+this.lineWidth+", color: "+this.color+" )"}},r.MeshFaceMaterial=function(){this.toString=function(){return"THREE.MeshFaceMaterial"}},r.ParticleBitmapMaterial=function(t){this.bitmap=t,this.offset=new r.Vector2,this.toString=function(){return"THREE.ParticleBitmapMaterial ( bitmap: "+this.bitmap+" )"}},r.ParticleCircleMaterial=function(t,i){this.color=new r.Color((i>=0?255*i<<24:4278190080)|t),this.toString=function(){return"THREE.ParticleCircleMaterial ( color: "+this.color+" )"}},r.ParticleDOMMaterial=function(t){this.domElement=t,this.toString=function(){return"THREE.ParticleDOMMaterial ( domElement: "+this.domElement+" )"}},r.Scene=function(){this.objects=[],this.lights=[],this.addObject=function(t){this.objects.push(t)},this.removeObject=function(t){for(var i=0,n=this.objects.length;i<n;i++)if(t==this.objects[i])return void this.objects.splice(i,1)},this.addLight=function(t){this.lights.push(t)},this.removeLight=function(t){for(var i=0,n=this.lights.length;i<n;i++)if(t==this.lights[i])return void this.lights.splice(i,1)},this.add=function(t){this.addObject(t)},this.toString=function(){return"THREE.Scene ( "+this.objects+" )"}},r.Projector=function(){var t,i,n,e,o,s,a,h,l=null,c=[],u=[],f=[],m=[],p=new r.Vector4,x=new r.Matrix4,d=new r.Matrix4;this.projectScene=function(y,g){var v,M,b,w,S,z,R,_,L,A,E,P,C,V,B,T,F,D,G;for(l=[],i=0,e=0,s=0,h=0,g.autoUpdateMatrix&&g.updateMatrix(),x.multiply(g.projectionMatrix,g.matrix),R=y.objects,v=0,M=R.length;v<M;v++)if(_=R[v],L=_.matrix,_.autoUpdateMatrix&&_.updateMatrix(),_ instanceof r.Mesh){for(d.multiply(x,L),A=_.geometry.vertices,b=0,w=A.length;b<w;b++)E=A[b],P=E.positionScreen,P.copy(E.position),d.transform(P),E.__visible=P.z>0&&P.z<1;for(V=_.geometry.faces,S=0,z=V.length;S<z;S++)B=V[S],B instanceof r.Face3?(T=A[B.a],F=A[B.b],D=A[B.c],T.__visible&&F.__visible&&D.__visible&&(_.doubleSided||_.flipSided!=(D.positionScreen.x-T.positionScreen.x)*(F.positionScreen.y-T.positionScreen.y)-(D.positionScreen.y-T.positionScreen.y)*(F.positionScreen.x-T.positionScreen.x)<0)&&(t=c[i]=c[i]||new r.RenderableFace3,t.v1.copy(T.positionScreen),t.v2.copy(F.positionScreen),t.v3.copy(D.positionScreen),t.centroidWorld.copy(B.centroid),_.matrix.transform(t.centroidWorld),t.normalWorld.copy(B.normal),_.matrixRotation.transform(t.normalWorld),t.z=Math.max(T.positionScreen.z,Math.max(F.positionScreen.z,D.positionScreen.z)),t.meshMaterial=_.material,t.faceMaterial=B.material,t.overdraw=_.overdraw,t.uvs=_.geometry.uvs[S],t.color=B.color,l.push(t),i++)):B instanceof r.Face4&&(T=A[B.a],F=A[B.b],D=A[B.c],G=A[B.d],T.__visible&&F.__visible&&D.__visible&&G.__visible&&(_.doubleSided||_.flipSided!=((G.positionScreen.x-T.positionScreen.x)*(F.positionScreen.y-T.positionScreen.y)-(G.positionScreen.y-T.positionScreen.y)*(F.positionScreen.x-T.positionScreen.x)<0||(F.positionScreen.x-D.positionScreen.x)*(G.positionScreen.y-D.positionScreen.y)-(F.positionScreen.y-D.positionScreen.y)*(G.positionScreen.x-D.positionScreen.x)<0))&&(n=u[e]=u[e]||new r.RenderableFace4,n.v1.copy(T.positionScreen),n.v2.copy(F.positionScreen),n.v3.copy(D.positionScreen),n.v4.copy(G.positionScreen),n.centroidWorld.copy(B.centroid),_.matrix.transform(n.centroidWorld),n.normalWorld.copy(B.normal),_.matrixRotation.transform(n.normalWorld),n.z=Math.max(T.positionScreen.z,Math.max(F.positionScreen.z,Math.max(D.positionScreen.z,G.positionScreen.z))),n.meshMaterial=_.material,n.faceMaterial=B.material,n.overdraw=_.overdraw,n.uvs=_.geometry.uvs[S],n.color=B.color,l.push(n),e++))}else if(_ instanceof r.Line)for(d.multiply(x,L),A=_.geometry.vertices,b=0,w=A.length;b<w;b++)E=A[b],P=E.positionScreen,P.copy(E.position),d.transform(P),E.__visible=P.z>0&&P.z<1,b>0&&(C=_.geometry.vertices[b-1],E.__visible&&C.__visible&&(o=f[s]=f[s]||new r.RenderableLine,o.v1.copy(E.positionScreen),o.v2.copy(C.positionScreen),o.z=Math.max(E.positionScreen.z,C.positionScreen.z),o.material=_.material,l.push(o),s++));else _ instanceof r.Particle&&(p.set(_.position.x,_.position.y,_.position.z,1),g.matrix.transform(p),g.projectionMatrix.transform(p),_.screen.set(p.x/p.w,p.y/p.w,p.z/p.w),_.screen.z>0&&_.screen.z<1&&(a=m[h]=m[h]||new r.RenderableParticle,a.x=_.screen.x,a.y=_.screen.y,a.z=_.screen.z,a.rotation=_.rotation.z,a.scale.x=_.scale.x*Math.abs(p.x/p.w-(p.x+g.projectionMatrix.n11)/(p.w+g.projectionMatrix.n14)),a.scale.y=_.scale.y*Math.abs(p.y/p.w-(p.y+g.projectionMatrix.n22)/(p.w+g.projectionMatrix.n24)),a.material=_.material,a.color=_.color,l.push(a),h++));return l.sort(function(t,i){return i.z-t.z}),l}},r.DOMRenderer=function(){r.Renderer.call(this);var t,i,n,e,o=null,s=new r.Projector,a=document.createElement("div");this.domElement=a,this.setSize=function(o,r){t=o,i=r,n=t/2,e=i/2},this.render=function(t,i){var a,h,l,c,u,f,m,p,x;for(o=s.projectScene(t,i),a=0,h=o.length;a<h;a++)if(u=o[a],u instanceof r.RenderableParticle)for(p=u.x*n+n,x=u.y*e+e,l=0,c=u.material.length;l<c;l++)f=u.material[l],f instanceof r.ParticleDOMMaterial&&(m=f.domElement,m.style.left=p+"px",m.style.top=x+"px")}},r.CanvasRenderer=function(){var t,i,n,e,o=null,s=new r.Projector,a=document.createElement("canvas"),h=a.getContext("2d"),l=new r.Rectangle,c=new r.Rectangle,u=new r.Rectangle,f=!1,m=new r.Color(4294967295),p=new r.Color(4294967295),x=new r.Color(4294967295),d=2*Math.PI,y=new r.Vector2,g=new r.Vector3,v=new r.UV,M=new r.UV,b=new r.UV,w=new r.UV,S=new r.Vector2,z=new r.Vector2;function R(t,i){var n,e,o;for(i.setRGBA(1,1,1,1),n=0,e=t.lights.length;n<e;n++)o=t.lights[n],o instanceof r.AmbientLight&&(i.r*=o.color.r,i.g*=o.color.g,i.b*=o.color.b)}function _(t,i,n){var e,o,s;for(e=0,o=t.lights.length;e<o;e++)s=t.lights[e],s instanceof r.DirectionalLight?(n.r+=s.color.r,n.g+=s.color.g,n.b+=s.color.b):s instanceof r.PointLight&&(n.r+=s.color.r,n.g+=s.color.g,n.b+=s.color.b)}function L(t,i,n){var e,o,s,a;for(e=0,o=t.lights.length;e<o;e++)s=t.lights[e],s instanceof r.DirectionalLight?(a=i.normalWorld.dot(s.position)*s.intensity,a>0&&(n.r+=s.color.r*a,n.g+=s.color.g*a,n.b+=s.color.b*a)):s instanceof r.PointLight&&(g.sub(s.position,i.centroidWorld),g.normalize(),a=i.normalWorld.dot(g)*s.intensity,a>0&&(n.r+=s.color.r*a,n.g+=s.color.g*a,n.b+=s.color.b*a))}function A(t,i,o,s,a){var c,y,g,v,M,b,w,S,z;if(s instanceof r.ParticleCircleMaterial){if(f?(p.copyRGB(x),_(a,o,p),m.copyRGBA(s.color),m.multiplySelfRGB(p),m.updateStyleString()):m=s.color,c=o.scale.x*n,y=o.scale.y*e,u.set(t-c,i-y,t+c,i+y),!l.instersects(u))return;h.save(),h.translate(t,i),h.rotate(-o.rotation),h.scale(c,y),h.beginPath(),h.arc(0,0,1,0,d,!0),h.closePath(),h.fillStyle=m.__styleString,h.fill(),h.restore()}else if(s instanceof r.ParticleBitmapMaterial){if(w=s.bitmap,S=w.width/2,z=w.height/2,g=o.scale.x*n,v=o.scale.y*e,c=g*S,y=v*z,M=s.offset.x*g,b=s.offset.y*v,u.set(t+M-c,i+b-y,t+M+c,i+b+y),!l.instersects(u))return;h.save(),h.translate(t,i),h.rotate(-o.rotation),h.scale(g,-v),h.translate(-S+s.offset.x,-z-s.offset.y),h.drawImage(w,0,0),h.restore()}}function E(t,i,n,e,o,s,a){s instanceof r.LineColorMaterial&&(f?(p.copyRGB(x),_(a,o,p),m.copyRGBA(s.color),m.multiplySelfRGB(p),m.updateStyleString()):m=s.color,h.lineWidth=s.lineWidth,h.lineJoin="round",h.lineCap="round",h.strokeStyle=m.__styleString,h.stroke(),u.inflate(h.lineWidth))}function P(t,i,n,e,o,s,a,l,c){var d,y,g;l instanceof r.MeshColorFillMaterial?(f?(p.copyRGB(x),L(c,a,p),m.copyRGBA(l.color),m.multiplySelfRGB(p),m.updateStyleString()):m=l.color,h.beginPath(),h.moveTo(t,i),h.lineTo(n,e),h.lineTo(o,s),h.lineTo(t,i),h.closePath(),h.fillStyle=m.__styleString,h.fill()):l instanceof r.MeshColorStrokeMaterial?(f?(p.copyRGB(x),L(c,a,p),m.copyRGBA(l.color),m.multiplySelfRGB(p),m.updateStyleString()):m=l.color,h.beginPath(),h.moveTo(t,i),h.lineTo(n,e),h.lineTo(o,s),h.lineTo(t,i),h.closePath(),h.lineWidth=l.lineWidth,h.lineJoin="round",h.lineCap="round",h.strokeStyle=m.__styleString,h.stroke(),u.inflate(h.lineWidth)):l instanceof r.MeshBitmapMaterial&&(d=l.bitmap,y=d.width-1,g=d.height-1,v.copy(a.uvs[0]),M.copy(a.uvs[1]),b.copy(a.uvs[2]),v.u*=y,v.v*=g,M.u*=y,M.v*=g,b.u*=y,b.v*=g,V(d,t,i,n,e,o,s,v.u,v.v,M.u,M.v,b.u,b.v))}function C(t,i,n,e,o,s,a,l,c,d,y,g,S,z,R){var _,A,E;z instanceof r.MeshColorFillMaterial?(f?(p.copyRGB(x),L(R,S,p),m.copyRGBA(z.color),m.multiplySelfRGB(p),m.updateStyleString()):m=z.color,h.beginPath(),h.moveTo(t,i),h.lineTo(n,e),h.lineTo(o,s),h.lineTo(a,l),h.lineTo(t,i),h.closePath(),h.fillStyle=m.__styleString,h.fill()):z instanceof r.MeshColorStrokeMaterial?(f?(p.copyRGB(x),L(R,S,p),m.copyRGBA(z.color),m.multiplySelfRGB(p),m.updateStyleString()):m=z.color,h.beginPath(),h.moveTo(t,i),h.lineTo(n,e),h.lineTo(o,s),h.lineTo(a,l),h.lineTo(t,i),h.closePath(),h.lineWidth=z.lineWidth,h.lineJoin="round",h.lineCap="round",h.strokeStyle=m.__styleString,h.stroke(),u.inflate(h.lineWidth)):z instanceof r.MeshBitmapMaterial&&(_=z.bitmap,A=_.width-1,E=_.height-1,v.copy(S.uvs[0]),M.copy(S.uvs[1]),b.copy(S.uvs[2]),w.copy(S.uvs[3]),v.u*=A,v.v*=E,M.u*=A,M.v*=E,b.u*=A,b.v*=E,w.u*=A,w.v*=E,V(_,t,i,n,e,a,l,v.u,v.v,M.u,M.v,w.u,w.v),V(_,c,d,o,s,y,g,M.u,M.v,b.u,b.v,w.u,w.v))}function V(t,i,n,e,o,r,s,a,l,c,u,f,m){var p,x,d,y,g,v,M;h.beginPath(),h.moveTo(i,n),h.lineTo(e,o),h.lineTo(r,s),h.lineTo(i,n),h.closePath(),h.save(),h.clip(),p=a*(m-u)-c*m+f*u+(c-f)*l,x=-(l*(r-e)-u*r+m*e+(u-m)*i)/p,d=(u*s+l*(o-s)-m*o+(m-u)*n)/p,y=(a*(r-e)-c*r+f*e+(c-f)*i)/p,g=-(c*s+a*(o-s)-f*o+(f-c)*n)/p,v=(a*(m*e-u*r)+l*(c*r-f*e)+(f*u-c*m)*i)/p,M=(a*(m*o-u*s)+l*(c*s-f*o)+(f*u-c*m)*n)/p,h.transform(x,d,y,g,v,M),h.drawImage(t,0,0),h.restore()}function B(t,i){y.sub(i,t),y.unit(),y.multiplyScalar(.75),i.addSelf(y),t.subSelf(y)}this.domElement=a,this.autoClear=!0,this.setSize=function(o,r){t=o,i=r,n=t/2,e=i/2,a.width=t,a.height=i,l.set(-n,-e,n,e)},this.clear=function(){c.isEmpty()||(c.inflate(1),c.minSelf(l),h.setTransform(1,0,0,-1,n,e),h.clearRect(c.getX(),c.getY(),c.getWidth(),c.getHeight()),c.empty())},this.render=function(t,i){var a,m,p,d,y,g,v,M,b,w,_,L,V,T,F,D,G,U,W,j;for(this.autoClear&&this.clear(),o=s.projectScene(t,i),h.setTransform(1,0,0,-1,n,e),f=t.lights.length>0,f&&R(t,x),a=0,m=o.length;a<m;a++){if(p=o[a],u.empty(),p instanceof r.RenderableParticle)for(b=p.x*n,w=p.y*e,d=0,y=p.material.length;d<y;d++)M=p.material[d],A(b,w,p,M,t);else if(p instanceof r.RenderableLine){if(b=p.v1.x*n,w=p.v1.y*e,_=p.v2.x*n,L=p.v2.y*e,u.addPoint(b,w),u.addPoint(_,L),!l.instersects(u))continue;for(h.beginPath(),h.moveTo(b,w),h.lineTo(_,L),h.closePath(),d=0,y=p.material.length;d<y;d++)M=p.material[d],E(b,w,_,L,p,M,t)}else if(p instanceof r.RenderableFace3){if(p.v1.x*=n,p.v1.y*=e,p.v2.x*=n,p.v2.y*=e,p.v3.x*=n,p.v3.y*=e,p.overdraw&&(B(p.v1,p.v2),B(p.v2,p.v3),B(p.v3,p.v1)),b=p.v1.x,w=p.v1.y,_=p.v2.x,L=p.v2.y,V=p.v3.x,T=p.v3.y,u.addPoint(b,w),u.addPoint(_,L),u.addPoint(V,T),!l.instersects(u))continue;d=0,y=p.meshMaterial.length;while(d<y)if(M=p.meshMaterial[d++],M instanceof r.MeshFaceMaterial){g=0,v=p.faceMaterial.length;while(g<v)M=p.faceMaterial[g++],P(b,w,_,L,V,T,p,M,t)}else P(b,w,_,L,V,T,p,M,t)}else if(p instanceof r.RenderableFace4){if(p.v1.x*=n,p.v1.y*=e,p.v2.x*=n,p.v2.y*=e,p.v3.x*=n,p.v3.y*=e,p.v4.x*=n,p.v4.y*=e,S.copy(p.v2),z.copy(p.v4),p.overdraw&&(B(p.v1,p.v2),B(p.v2,p.v4),B(p.v4,p.v1)),b=p.v1.x,w=p.v1.y,_=p.v2.x,L=p.v2.y,F=p.v4.x,D=p.v4.y,p.overdraw&&(B(p.v3,S),B(p.v3,z)),V=p.v3.x,T=p.v3.y,G=S.x,U=S.y,W=z.x,j=z.y,u.addPoint(b,w),u.addPoint(_,L),u.addPoint(V,T),u.addPoint(F,D),!l.instersects(u))continue;d=0,y=p.meshMaterial.length;while(d<y)if(M=p.meshMaterial[d++],M instanceof r.MeshFaceMaterial){g=0,v=p.faceMaterial.length;while(g<v)M=p.faceMaterial[g++],C(b,w,_,L,V,T,F,D,G,U,W,j,p,M,t)}else C(b,w,_,L,V,T,F,D,G,U,W,j,p,M,t)}c.addRectangle(u)}h.setTransform(1,0,0,1,0,0)}},r.SVGRenderer=function(){var t,i,n,e,o,s,a,h=null,l=new r.Projector,c=document.createElementNS("http://www.w3.org/2000/svg","svg"),u=new r.Rectangle,f=new r.Rectangle,m=!1,p=new r.Color(4294967295),x=new r.Color(4294967295),d=new r.Color(4294967295),y=new r.Vector3,g=[],v=[],M=1;function b(t,i){var n,e,o;for(i.setRGBA(1,1,1,1),n=0,e=t.lights.length;n<e;n++)o=t.lights[n],o instanceof r.AmbientLight&&(i.r*=o.color.r,i.g*=o.color.g,i.b*=o.color.b)}function w(t,i,n){var e,o,s;for(e=0,o=t.lights.length;e<o;e++)s=t.lights[e],s instanceof r.DirectionalLight?(n.r+=s.color.r,n.g+=s.color.g,n.b+=s.color.b):s instanceof r.PointLight&&(n.r+=s.color.r,n.g+=s.color.g,n.b+=s.color.b)}function S(t,i,n){var e,o,s,a;for(e=0,o=t.lights.length;e<o;e++)s=t.lights[e],s instanceof r.DirectionalLight?(a=i.normalWorld.dot(s.position)*s.intensity,a>0&&(n.r+=s.color.r*a,n.g+=s.color.g*a,n.b+=s.color.b*a)):s instanceof r.PointLight&&(y.sub(s.position,i.centroidWorld),y.normalize(),a=i.normalWorld.dot(y)*s.intensity,a>0&&(n.r+=s.color.r*a,n.g+=s.color.g*a,n.b+=s.color.b*a))}function z(t,i,e,s,h){o=A(a++),o.setAttribute("cx",t),o.setAttribute("cy",i),o.setAttribute("r",e.scale.x*n),s instanceof r.ParticleCircleMaterial&&(m?(x.copyRGB(d),w(h,e,x),p.copyRGBA(s.color),p.multiplySelfRGB(x),p.updateStyleString()):p=s.color,o.setAttribute("style","fill: "+p.__styleString)),c.appendChild(o)}function R(t,i,n,e,a,h,l,u,f){o=L(s++),o.setAttribute("d","M "+t+" "+i+" L "+n+" "+e+" L "+a+","+h+"z"),u instanceof r.MeshColorFillMaterial?(m?(x.copyRGB(d),S(f,l,x),p.copyRGBA(u.color),p.multiplySelfRGB(x),p.updateStyleString()):p=u.color,o.setAttribute("style","fill: "+p.__styleString)):u instanceof r.MeshColorStrokeMaterial&&(m?(x.copyRGB(d),S(f,l,x),p.copyRGBA(u.color),p.multiplySelfRGB(x),p.updateStyleString()):p=u.color,o.setAttribute("style","fill: none; stroke: "+p.__styleString+"; stroke-width: "+u.lineWidth+"; stroke-linecap: round; stroke-linejoin: round")),c.appendChild(o)}function _(t,i,n,e,a,h,l,u,f,y,g){o=L(s++),o.setAttribute("d","M "+t+" "+i+" L "+n+" "+e+" L "+a+","+h+" L "+l+","+u+"z"),y instanceof r.MeshColorFillMaterial?(m?(x.copyRGB(d),S(g,f,x),p.copyRGBA(y.color),p.multiplySelfRGB(x),p.updateStyleString()):p=y.color,o.setAttribute("style","fill: "+p.__styleString)):y instanceof r.MeshColorStrokeMaterial&&(m?(x.copyRGB(d),S(g,f,x),p.copyRGBA(y.color),p.multiplySelfRGB(x),p.updateStyleString()):p=y.color,o.setAttribute("style","fill: none; stroke: "+p.__styleString+"; stroke-width: "+y.lineWidth+"; stroke-linecap: round; stroke-linejoin: round")),c.appendChild(o)}function L(t){return null==g[t]?(g[t]=document.createElementNS("http://www.w3.org/2000/svg","path"),0==M&&g[t].setAttribute("shape-rendering","crispEdges"),g[t]):g[t]}function A(t){return null==v[t]?(v[t]=document.createElementNS("http://www.w3.org/2000/svg","circle"),0==M&&v[t].setAttribute("shape-rendering","crispEdges"),v[t]):v[t]}this.domElement=c,this.autoClear=!0,this.setQuality=function(t){switch(t){case"high":M=1;break;case"low":M=0;break}},this.setSize=function(o,r){t=o,i=r,n=t/2,e=i/2,c.setAttribute("viewBox",-n+" "+-e+" "+t+" "+i),c.setAttribute("width",t),c.setAttribute("height",i),u.set(-n,-e,n,e)},this.clear=function(){while(c.childNodes.length>0)c.removeChild(c.childNodes[0])},this.render=function(t,i){var o,c,p,x,y,g,v,M,w,S,L,A,E,P,C,V;for(this.autoClear&&this.clear(),h=l.projectScene(t,i),s=0,a=0,m=t.lights.length>0,m&&b(t,d),o=0,c=h.length;o<c;o++)if(v=h[o],f.empty(),v instanceof r.RenderableParticle)for(w=v.x*n,S=v.y*-e,p=0,x=v.material.length;p<x;p++)M=v.material[p],z(w,S,v,M,t);else if(v instanceof r.RenderableFace3){if(w=v.v1.x*n,S=v.v1.y*-e,L=v.v2.x*n,A=v.v2.y*-e,E=v.v3.x*n,P=v.v3.y*-e,f.addPoint(w,S),f.addPoint(L,A),f.addPoint(E,P),!u.instersects(f))continue;p=0,x=v.meshMaterial.length;while(p<x)if(M=v.meshMaterial[p++],M instanceof r.MeshFaceMaterial){y=0,g=v.faceMaterial.length;while(y<g)M=v.faceMaterial[y++],R(w,S,L,A,E,P,v,M,t)}else R(w,S,L,A,E,P,v,M,t)}else if(v instanceof r.RenderableFace4){if(w=v.v1.x*n,S=v.v1.y*-e,L=v.v2.x*n,A=v.v2.y*-e,E=v.v3.x*n,P=v.v3.y*-e,C=v.v4.x*n,V=v.v4.y*-e,f.addPoint(w,S),f.addPoint(L,A),f.addPoint(E,P),f.addPoint(C,V),!u.instersects(f))continue;p=0,x=v.meshMaterial.length;while(p<x)if(M=v.meshMaterial[p++],M instanceof r.MeshFaceMaterial){y=0,g=v.faceMaterial.length;while(y<g)M=v.faceMaterial[y++],_(w,S,L,A,E,P,C,V,v,M,t)}else _(w,S,L,A,E,P,C,V,v,M,t)}}},r.WebGLRenderer=function(){var t,i,n,e=document.createElement("canvas"),o=new r.Matrix4,s=0,a=1,h=2,l=3;function c(){try{t=e.getContext("experimental-webgl",{antialias:!0})}catch(t){}if(!t)throw alert("WebGL not supported"),"cannot create webgl context";t.clearColor(0,0,0,1),t.clearDepth(1),t.enable(t.DEPTH_TEST),t.depthFunc(t.LEQUAL),t.enable(t.BLEND),t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA),t.clearColor(0,0,0,0)}function u(){i=t.createProgram(),t.attachShader(i,f("fragment",["#ifdef GL_ES","precision highp float;","#endif","uniform sampler2D diffuse;","uniform vec4 uniformColor;","varying vec2 vertexUv;","varying vec3 lightWeighting;","varying vec3 vNormal;","uniform int material;","uniform vec4 mAmbient;","uniform vec4 mDiffuse;","uniform vec4 mSpecular;","uniform float mShininess;","varying vec3 pLightVectorPoint;","varying vec3 pLightVectorDirection;","varying vec3 pViewPosition;","void main(){","if(material==3) { ","vec3 lightVectorPoint = normalize(pLightVectorPoint);","vec3 lightVectorDir = normalize(pLightVectorDirection);","vec3 normal = normalize(vNormal);","vec3 viewPosition = normalize(pViewPosition);","vec3 halfVectorPoint = normalize(pLightVectorPoint + pViewPosition);","float dotNormalHalfPoint = dot(normal, halfVectorPoint);","float ambientCompPoint = 1.0;","float diffuseCompPoint = max(dot(normal, lightVectorPoint), 0.0);","float specularCompPoint = pow(dotNormalHalfPoint, mShininess);","vec4 ambientPoint  = mAmbient * ambientCompPoint;","vec4 diffusePoint  = mDiffuse * diffuseCompPoint;","vec4 specularPoint = mSpecular * specularCompPoint;","vec3 halfVectorDir = normalize(pLightVectorDirection + pViewPosition);","float dotNormalHalfDir = dot(normal, halfVectorDir);","float ambientCompDir = 1.0;","float diffuseCompDir = max(dot(normal, lightVectorDir), 0.0);","float specularCompDir = pow(dotNormalHalfDir, mShininess);","vec4 ambientDir  = mAmbient * ambientCompDir;","vec4 diffuseDir  = mDiffuse * diffuseCompDir;","vec4 specularDir = mSpecular * specularCompDir;","vec4 pointLight = ambientPoint + diffusePoint + specularPoint;","vec4 dirLight = ambientDir + diffuseDir + specularDir;","gl_FragColor = vec4((pointLight.xyz + dirLight.xyz) * lightWeighting, 1.0);","} else if(material==2) {","vec4 texelColor = texture2D(diffuse, vertexUv);","gl_FragColor = vec4(texelColor.rgb * lightWeighting, texelColor.a);","} else if(material==1) {","gl_FragColor = vec4(uniformColor.rgb * lightWeighting, uniformColor.a);","} else {","gl_FragColor = vec4(uniformColor.rgb * lightWeighting, uniformColor.a);","}","}"].join("\n"))),t.attachShader(i,f("vertex",["attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","uniform bool enableLighting;","uniform vec3 ambientColor;","uniform vec3 directionalColor;","uniform vec3 lightingDirection;","uniform vec3 pointColor;","uniform vec3 pointPosition;","uniform mat4 objMatrix;","uniform mat4 viewMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat3 normalMatrix;","varying vec4 vertexColor;","varying vec2 vertexUv;","varying vec3 lightWeighting;","varying vec3 vNormal;","varying vec3 pLightVectorPoint;","varying vec3 pLightVectorDirection;","varying vec3 pViewPosition;","uniform vec3 cameraPosition;","void main(void) {","vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );","vec3 transformedNormal = normalize(normalMatrix * normal);","vec4 lPosition = viewMatrix * vec4( pointPosition, 1.0 );","vec4 lDirection = viewMatrix * vec4( lightingDirection, 0.0 );","pLightVectorPoint = normalize(pointPosition.xyz - position.xyz);","pLightVectorDirection = normalize(lDirection.xyz);","vec4 mPosition = objMatrix * vec4( position, 1.0 );","pViewPosition = cameraPosition - mPosition.xyz;","if(!enableLighting) {","lightWeighting = vec3(1.0, 1.0, 1.0);","} else {","vec3 pointLight = normalize(lPosition.xyz - mvPosition.xyz);","float directionalLightWeighting = max(dot(transformedNormal, normalize(lDirection.xyz)), 0.0);","float pointLightWeighting = max(dot(transformedNormal, pointLight), 0.0);","lightWeighting = ambientColor + directionalColor * directionalLightWeighting + pointColor * pointLightWeighting;","}","vNormal = transformedNormal;","vertexUv = uv;","gl_Position = projectionMatrix * mvPosition;","}"].join("\n"))),t.linkProgram(i),t.getProgramParameter(i,t.LINK_STATUS)||alert("Could not initialise shaders"),t.useProgram(i),i.viewMatrix=t.getUniformLocation(i,"viewMatrix"),i.modelViewMatrix=t.getUniformLocation(i,"modelViewMatrix"),i.projectionMatrix=t.getUniformLocation(i,"projectionMatrix"),i.normalMatrix=t.getUniformLocation(i,"normalMatrix"),i.objMatrix=t.getUniformLocation(i,"objMatrix"),i.enableLighting=t.getUniformLocation(i,"enableLighting"),i.ambientColor=t.getUniformLocation(i,"ambientColor"),i.directionalColor=t.getUniformLocation(i,"directionalColor"),i.lightingDirection=t.getUniformLocation(i,"lightingDirection"),i.pointColor=t.getUniformLocation(i,"pointColor"),i.pointPosition=t.getUniformLocation(i,"pointPosition"),i.material=t.getUniformLocation(i,"material"),i.uniformColor=t.getUniformLocation(i,"uniformColor"),i.mAmbient=t.getUniformLocation(i,"mAmbient"),i.mDiffuse=t.getUniformLocation(i,"mDiffuse"),i.mSpecular=t.getUniformLocation(i,"mSpecular"),i.mShininess=t.getUniformLocation(i,"mShininess"),i.cameraPosition=t.getUniformLocation(i,"cameraPosition"),i.position=t.getAttribLocation(i,"position"),t.enableVertexAttribArray(i.position),i.normal=t.getAttribLocation(i,"normal"),t.enableVertexAttribArray(i.normal),i.uv=t.getAttribLocation(i,"uv"),t.enableVertexAttribArray(i.uv),i.diffuse=t.getUniformLocation(i,"diffuse"),t.uniform1i(i.diffuse,0),i.viewMatrixArray=new Float32Array(16),i.modelViewMatrixArray=new Float32Array(16),i.projectionMatrixArray=new Float32Array(16)}function f(i,n){var e;return"fragment"==i?e=t.createShader(t.FRAGMENT_SHADER):"vertex"==i&&(e=t.createShader(t.VERTEX_SHADER)),t.shaderSource(e,n),t.compileShader(e),t.getShaderParameter(e,t.COMPILE_STATUS)?e:(alert(t.getShaderInfoLog(e)),null)}this.domElement=e,this.autoClear=!0,c(),u(),this.setSize=function(i,n){e.width=i,e.height=n,t.viewport(0,0,e.width,e.height)},this.clear=function(){t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT)},this.setupLights=function(n){var e,o,s,a,h,l;for(t.uniform1i(i.enableLighting,n.lights.length),e=0,o=n.lights.length;e<o;e++)l=n.lights[e],l instanceof r.AmbientLight?(s=l.color,t.uniform3f(i.ambientColor,s.r,s.g,s.b)):l instanceof r.DirectionalLight?(s=l.color,a=l.position,h=l.intensity,t.uniform3f(i.lightingDirection,a.x,a.y,a.z),t.uniform3f(i.directionalColor,s.r*h,s.g*h,s.b*h)):l instanceof r.PointLight&&(s=l.color,a=l.position,h=l.intensity,t.uniform3f(i.pointPosition,a.x,a.y,a.z),t.uniform3f(i.pointColor,s.r*h,s.g*h,s.b*h))},this.createBuffers=function(i,n){var e,o,s,a,h,l,c,u,f,m,p,x=i.materialFaceGroup[n],d=[],y=[],g=[],v=[],M=[],b=0;for(e=0,o=x.faces.length;e<o;e++)s=x.faces[e],a=i.geometry.faces[s],h=a.vertexNormals,l=a.normal,c=i.geometry.uvs[s],a instanceof r.Face3?(u=i.geometry.vertices[a.a].position,f=i.geometry.vertices[a.b].position,m=i.geometry.vertices[a.c].position,g.push(u.x,u.y,u.z),g.push(f.x,f.y,f.z),g.push(m.x,m.y,m.z),3==h.length?(v.push(h[0].x,h[0].y,h[0].z),v.push(h[1].x,h[1].y,h[1].z),v.push(h[2].x,h[2].y,h[2].z)):(v.push(l.x,l.y,l.z),v.push(l.x,l.y,l.z),v.push(l.x,l.y,l.z)),c&&(M.push(c[0].u,c[0].v),M.push(c[1].u,c[1].v),M.push(c[2].u,c[2].v)),d.push(b,b+1,b+2),y.push(b,b+1),y.push(b,b+2),y.push(b+1,b+2),b+=3):a instanceof r.Face4&&(u=i.geometry.vertices[a.a].position,f=i.geometry.vertices[a.b].position,m=i.geometry.vertices[a.c].position,p=i.geometry.vertices[a.d].position,g.push(u.x,u.y,u.z),g.push(f.x,f.y,f.z),g.push(m.x,m.y,m.z),g.push(p.x,p.y,p.z),4==h.length?(v.push(h[0].x,h[0].y,h[0].z),v.push(h[1].x,h[1].y,h[1].z),v.push(h[2].x,h[2].y,h[2].z),v.push(h[3].x,h[3].y,h[3].z)):(v.push(l.x,l.y,l.z),v.push(l.x,l.y,l.z),v.push(l.x,l.y,l.z),v.push(l.x,l.y,l.z)),c&&(M.push(c[0].u,c[0].v),M.push(c[1].u,c[1].v),M.push(c[2].u,c[2].v),M.push(c[3].u,c[3].v)),d.push(b,b+1,b+2),d.push(b,b+2,b+3),y.push(b,b+1),y.push(b,b+2),y.push(b,b+3),y.push(b+1,b+2),y.push(b+2,b+3),b+=4);g.length&&(x.__webGLVertexBuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,x.__webGLVertexBuffer),t.bufferData(t.ARRAY_BUFFER,new Float32Array(g),t.STATIC_DRAW),x.__webGLNormalBuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,x.__webGLNormalBuffer),t.bufferData(t.ARRAY_BUFFER,new Float32Array(v),t.STATIC_DRAW),x.__webGLUVBuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,x.__webGLUVBuffer),t.bufferData(t.ARRAY_BUFFER,new Float32Array(M),t.STATIC_DRAW),x.__webGLFaceBuffer=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,x.__webGLFaceBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,new Uint16Array(d),t.STATIC_DRAW),x.__webGLLineBuffer=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,x.__webGLLineBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,new Uint16Array(y),t.STATIC_DRAW),x.__webGLFaceCount=d.length,x.__webGLLineCount=y.length)},this.renderBuffer=function(n,e){n instanceof r.MeshPhongMaterial?(mAmbient=n.ambient,mDiffuse=n.diffuse,mSpecular=n.specular,t.uniform4f(i.mAmbient,mAmbient.r,mAmbient.g,mAmbient.b,n.opacity),t.uniform4f(i.mDiffuse,mDiffuse.r,mDiffuse.g,mDiffuse.b,n.opacity),t.uniform4f(i.mSpecular,mSpecular.r,mSpecular.g,mSpecular.b,n.opacity),t.uniform1f(i.mShininess,n.shininess),t.uniform1i(i.material,l)):n instanceof r.MeshColorFillMaterial?(color=n.color,t.uniform4f(i.uniformColor,color.r*color.a,color.g*color.a,color.b*color.a,color.a),t.uniform1i(i.material,s)):n instanceof r.MeshColorStrokeMaterial?(lineWidth=n.lineWidth,color=n.color,t.uniform4f(i.uniformColor,color.r*color.a,color.g*color.a,color.b*color.a,color.a),t.uniform1i(i.material,a)):n instanceof r.MeshBitmapMaterial&&(!n.__webGLTexture&&n.loaded&&(n.__webGLTexture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,n.__webGLTexture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,n.bitmap),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameterCanvasRendereri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR_MIPMAP_LINEAR),t.generateMipmap(t.TEXTURE_2D),t.bindTexture(t.TEXTURE_2D,null)),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,n.__webGLTexture),t.uniform1i(i.diffuse,0),t.uniform1i(i.material,h)),t.bindBuffer(t.ARRAY_BUFFER,e.__webGLVertexBuffer),t.vertexAttribPointer(i.position,3,t.FLOAT,!1,0,0),t.bindBuffer(t.ARRAY_BUFFER,e.__webGLNormalBuffer),t.vertexAttribPointer(i.normal,3,t.FLOAT,!1,0,0),n instanceof r.MeshBitmapMaterial?(t.bindBuffer(t.ARRAY_BUFFER,e.__webGLUVBuffer),t.enableVertexAttribArray(i.uv),t.vertexAttribPointer(i.uv,2,t.FLOAT,!1,0,0)):t.disableVertexAttribArray(i.uv),n instanceof r.MeshBitmapMaterial||n instanceof r.MeshColorFillMaterial||n instanceof r.MeshPhongMaterial?(t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e.__webGLFaceBuffer),t.drawElements(t.TRIANGLES,e.__webGLFaceCount,t.UNSIGNED_SHORT,0)):n instanceof r.MeshColorStrokeMaterial&&(t.lineWidth(lineWidth),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e.__webGLLineBuffer),t.drawElements(t.LINES,e.__webGLLineCount,t.UNSIGNED_SHORT,0))},this.renderMesh=function(t,i){var n,e,o,s,a,h,l,c;for(a in t.materialFaceGroup)for(c=t.materialFaceGroup[a],c.__webGLVertexBuffer||this.createBuffers(t,a),o=0,s=t.material.length;o<s;o++)if(l=t.material[o],l instanceof r.MeshFaceMaterial)for(n=0,e=c.material.length;n<e;n++)h=c.material[n],this.renderBuffer(h,c);else h=l,this.renderBuffer(h,c)},this.setupMatrices=function(e,s){e.autoUpdateMatrix&&e.updateMatrix(),o.multiply(s.matrix,e.matrix),i.viewMatrixArray=new Float32Array(s.matrix.flatten()),i.modelViewMatrixArray=new Float32Array(o.flatten()),i.projectionMatrixArray=new Float32Array(s.projectionMatrix.flatten()),n=r.Matrix4.makeInvert3x3(o).transpose(),i.normalMatrixArray=new Float32Array(n.m),t.uniformMatrix4fv(i.viewMatrix,!1,i.viewMatrixArray),t.uniformMatrix4fv(i.modelViewMatrix,!1,i.modelViewMatrixArray),t.uniformMatrix4fv(i.projectionMatrix,!1,i.projectionMatrixArray),t.uniformMatrix3fv(i.normalMatrix,!1,i.normalMatrixArray),t.uniformMatrix4fv(i.objMatrix,!1,new Float32Array(e.matrix.flatten()))},this.render=function(n,e){var o,s,a;for(this.autoClear&&this.clear(),e.autoUpdateMatrix&&e.updateMatrix(),t.uniform3f(i.cameraPosition,e.position.x,e.position.y,e.position.z),this.setupLights(n),o=0,s=n.objects.length;o<s;o++)a=n.objects[o],this.setupMatrices(a,e),a instanceof r.Mesh?this.renderMesh(a,e):a instanceof r.Line||r.Particle}},r.RenderableFace3=function(){this.v1=new r.Vector2,this.v2=new r.Vector2,this.v3=new r.Vector2,this.centroidWorld=new r.Vector3,this.normalWorld=new r.Vector3,this.z=null,this.color=null,this.material=null},r.RenderableFace4=function(){this.v1=new r.Vector2,this.v2=new r.Vector2,this.v3=new r.Vector2,this.v4=new r.Vector2,this.centroidWorld=new r.Vector3,this.normalWorld=new r.Vector3,this.z=null,this.color=null,this.material=null},r.RenderableParticle=function(){this.x=null,this.y=null,this.z=null,this.rotation=null,this.scale=new r.Vector2,this.color=null,this.material=null},r.RenderableLine=function(){this.v1=new r.Vector2,this.v2=new r.Vector2,this.z=null,this.color=null,this.material=null};var s=r,a={data:function(){return{form:{username:"admin",password:"123"},loading:!1}},methods:{onResize:function(){this.liziInit()},liziInit:function(){var t,i,n,e,o,r,a,h=window.innerWidth,l=window.innerHeight,c=90,u=50,f=50,m=0,p=window.innerWidth/2,x=window.innerHeight/2;function d(){t=document.createElement("div"),t.style.position="relative",t.style.top="200px",document.getElementById("indexLizi").appendChild(t),o=new s.Camera(75,h/l,1,1e4),o.position.z=1e3,r=new s.Scene,a=new s.CanvasRenderer,a.setSize(h,l),i=new Array;for(var m=0,p=new s.ParticleCircleMaterial(621531,1),x=0;x<u;x++)for(var d=0;d<f;d++)n=i[m++]=new s.Particle(p),n.position.x=x*c-u*c/2,n.position.z=d*c-f*c/2,r.add(n);e=0,t.appendChild(a.domElement),document.addEventListener("mousemove",y,!1),document.addEventListener("touchmove",g,!1)}function y(t){m=t.clientX-p,t.clientY-x}function g(t){1==t.touches.length&&(t.preventDefault(),m=t.touches[0].pageX-p,t.touches[0].pageY-x)}function v(){o.position.x+=.05*(m-o.position.x),o.position.y=364;for(var t=0,s=0;s<u;s++)for(var h=0;h<f;h++)n=i[t++],n.position.y=50*Math.sin(.3*(s+e))+50*Math.sin(.5*(h+e)),n.scale.x=n.scale.y=2*(Math.sin(.3*(s+e))+1)+2*(Math.sin(.5*(h+e))+1);a.render(r,o),e+=.1}d(),this.interval=setInterval(v,1e3/60)}},computed:{},mounted:function(){this.onResize(),this.liziInit()},beforeDestroy:function(){this.interval&&clearInterval(this.interval)}},h=a,l=(n("OHkj"),n("KHd+")),c=Object(l["a"])(h,e,o,!1,null,null,null);i["default"]=c.exports},OHkj:function(t,i,n){"use strict";var e=n("1Lbc"),o=n.n(e);o.a}}]);